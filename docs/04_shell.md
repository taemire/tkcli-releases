# 4. 대화형 쉘 모드 (Interactive Shell)

인자 `--shell` (또는 `-s`) 플래그와 함께 `tkcli`를 실행하면 go-prompt 기반의 지능형 대화형 쉘 모드로 진입합니다.

## 4.1 실행

```console
$ tkcli --shell
# 또는
$ tkcli -s
tkcli>
```

> **주의**: 대화형 쉘 모드는 TTY(터미널) 환경을 필수적으로 요구합니다. 파이프(pipe)나 리다이렉션 상황에서는 패닉 방지를 위해 실행이 제한됩니다.

## 4.2 주요 기능

### 지능형 자동 완성 (Intelligent Completion)
명령어, 서브커맨드뿐만 아니라 **플래그(옵션)**와 **동적 인자** 자동 완성을 지원합니다.

- **명령어 완성**: 단어 입력 중 `TAB`을 눌러 자동 완성 및 하단 가이드 확인.
- **플래그 완성**: `-` 또는 `--` 입력 시 현재 명령어에서 사용 가능한 모든 옵션 목록 표시.
- **동적 추천**: `service start` 등 실행 시 현재 시스템의 실제 서비스 목록을 실시간으로 가져와 제안.

### 프리미엄 테마 및 입력 보호
- **세련된 UI**: Cyan 색상의 프롬프트와 가독성 높은 제안 목록 테마를 적용하였습니다.
- **Backspace 보호**: 실수로 프롬프트 영역(`tkcli> `)이 지워지지 않도록 입력 영역을 엄격히 보호합니다.
- **최적화된 팝업**: 최대 15개의 제안 목록을 한눈에 확인할 수 있습니다.

### Signal Handling & History
- **스마트 Ctrl+C**: 명령어 실행 중에는 해당 작업만 중단하고, 입력 대기 중에는 입력 버퍼만 비워 즉각적인 재입력이 가능합니다.
- **History**: 위/아래 방향키로 이전 명령 히스토리를 탐색합니다.

### 종료
다음 방법으로 쉘을 종료할 수 있습니다:
- `exit` 입력
- `quit` 입력
- `Ctrl+D` (EOF)

## 4.3 사용 예시

```console
$ tkcli -s
tkcli> version
tkcli 버전: 0.4.1
...

tkcli> service start --<TAB>
--help   --force   --no-wait
...

tkcli> exit
Bye!
```
